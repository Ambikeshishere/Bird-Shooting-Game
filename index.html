<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bird Killing Game</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family: Arial, sans-serif; overflow: hidden; background: black; }

#scoreboardContainer {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 5;
  text-align: right;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 10px;
}

#scoreboard {
  background: rgba(0,0,0,0.5);
  padding: 10px 15px;
  border-radius: 10px;
  color: #fff;
  font-size: 1.5rem;
  min-width: 150px;
}

#replayBtn { background:#1e90ff; display:none; }
#replayBtn:hover { background:#3399ff; }

button.start-replay {
  padding: 1vh 2vw;
  font-size: 2vw;
  border: none;
  border-radius: 1vw;
  cursor: pointer;
  color: #fff;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 5;
}
#startBtn { background:#2e8b57; }
#startBtn:hover { background:#3cb371; }

#gameArea { position: relative; width: 100vw; height: 100vh; overflow: hidden; cursor: crosshair; }
#backgroundVideo {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  z-index: 0;
  pointer-events: none;
}

.bird { position:absolute; width:6.5vw; height:5vw; background-size: cover; background-position:center; cursor:pointer; z-index: 3; }
.blood { position:absolute; width:6vw; height:6vw; background-image:url('blood.png'); background-size:cover; background-position:center; pointer-events:none; animation: fadeOut 0.5s forwards; z-index: 4; }
@keyframes fadeOut { 0% { opacity:1; transform:scale(1); } 100% { opacity:0; transform:scale(1.5); } }

#gameOver { display:none; background: rgba(0,0,0,0.7); color:white; padding:2vh 2vw; font-size:1.2rem; border-radius:1vw; text-align:right; min-width: 150px; }

@media (max-width:600px){
  .bird, .blood { width: 12vw; height: 12vw; }
  #scoreboard{font-size:1.2rem; padding:8px 12px;}
  button.start-replay{font-size:4vw;padding:2vh 4vw;}
  #gameOver{font-size:1rem; padding:6px 8px;}
}
#footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  text-align: center;
  padding: 1px 0;
  background: rgba(0, 0, 0, 0.5); /* semi-transparent black */
  color: #fff;
  font-size: 0.8rem;
  z-index: 5;
  pointer-events: none; /* allows clicks to pass through */
  text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff; /* subtle glow */
  animation: glow 2s infinite alternate;
}

@keyframes glow {
  0% { text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff; }
  50% { text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff; }
  100% { text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff; }
}

@media (max-width:600px){
  #footer { font-size:0.8rem; padding:6px 0; }
}

</style>
</head>
<body>
<h1>Bird Clicking Game</h1>
<button id="startBtn" class="start-replay">Start Game</button>

<div id="scoreboardContainer">
  <div id="scoreboard">
    <div id="score">Score: 0</div>
    <div id="missed">Missed: 0</div>
  </div>
  <div id="gameOver"></div>
  <button id="replayBtn">Replay</button>
</div>

<div id="gameArea">
  <video id="backgroundVideo" autoplay muted loop playsinline>
    <source src="background.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

<audio id="gunshotSound" src="gunshot.mp3" preload="auto"></audio>
<audio id="backgroundMusic" src="soft-music.mp3" preload="auto" loop></audio>
<audio id="birdChirp" src="bird-chirp.mp3" preload="auto"></audio>

<script>
const gameArea = document.getElementById('gameArea');
const scoreDisplay = document.getElementById('score');
const missedDisplay = document.getElementById('missed');
const gameOverDiv = document.getElementById('gameOver');
const gunshotSound = document.getElementById('gunshotSound');
const backgroundMusic = document.getElementById('backgroundMusic');
const birdChirp = document.getElementById('birdChirp');
const startBtn = document.getElementById('startBtn');
const replayBtn = document.getElementById('replayBtn');

let score = 0, missed = 0, maxMissed = 100;
let birdSpeed = window.innerWidth < 600 ? 0.35 : 0.25;
let waveInterval = 2000;
let birds = [];
let lastWaveTime = 0;
let gameRunning = false;

const birdImages = ['bird1.png', 'bird4.png'];

startBtn.addEventListener('click', () => {
  startBtn.style.display = 'none';
  resetGame();
  startGame();
  startAudio();
});

replayBtn.addEventListener('click', () => {
  replayBtn.style.display = 'none';
  resetGame();
  startGame();
  startAudio();
});

function startAudio() {
  backgroundMusic.currentTime = 0;
  backgroundMusic.volume = 0.3;
  backgroundMusic.play().catch(() => {});
  
  setInterval(() => {
    birdChirp.currentTime = 0;
    birdChirp.volume = 0.4;
    birdChirp.play();
  }, 7000);
}

function resetGame() {
  score = 0; missed = 0;
  birdSpeed = window.innerWidth < 600 ? 0.35 : 0.25;
  scoreDisplay.textContent = 'Score: 0';
  missedDisplay.textContent = 'Missed: 0';
  gameOverDiv.style.display = 'none';
  birds.forEach(b => b.element.remove());
  birds = [];
  lastWaveTime = 0;
  gameRunning = true;
}

function startGame() {
  requestAnimationFrame(gameLoop);
}

function gameLoop(timestamp) {
  if (!gameRunning) return;

  // Create waves every waveInterval
  if (timestamp - lastWaveTime > waveInterval) {
    createBirdWave();
    lastWaveTime = timestamp;
  }

  // Move birds
  birds.forEach(bird => moveBird(bird));

  requestAnimationFrame(gameLoop);
}

function createBirdWave() {
  const numBirds = 3 + Math.floor(Math.random() * 3);
  // Ensure at least one of each bird type per wave
  const usedBirds = [...birdImages];
  for (let i = 0; i < numBirds; i++) {
    setTimeout(() => {
      let birdType;
      if (usedBirds.length > 0) {
        birdType = usedBirds.shift();
      } else {
        birdType = birdImages[Math.floor(Math.random() * birdImages.length)];
      }
      createBird(birdType);
    }, i * 300);
  }
}

function createBird(birdType) {
  const birdEl = document.createElement('div'); 
  birdEl.classList.add('bird');
  birdEl.style.backgroundImage = `url(${birdType})`;

  const skyHeight = gameArea.clientHeight * 0.7;
  const y = Math.random() * skyHeight;
  const startFromLeft = Math.random() > 0.5;
  const posX = startFromLeft ? -6 : 100;
  birdEl.style.top = y + 'px';
  birdEl.style.left = posX + 'vw';
  birdEl.style.transform = startFromLeft ? 'scaleX(1)' : 'scaleX(-1)';

  birdEl.addEventListener('click', e => {
    gunshotSound.currentTime = 0;
    gunshotSound.play();
    createBlood(e.clientX, e.clientY);
    score++;
    scoreDisplay.textContent = 'Score: ' + score;
    birdEl.remove();
    birds = birds.filter(b => b.element !== birdEl);
    birdSpeed += 0.005; // increase speed on kill
  });

  gameArea.appendChild(birdEl);

  const birdObj = {
    element: birdEl,
    posX: posX,
    y: y,
    direction: startFromLeft ? 1 : -1,
    amplitude: 20,
    frequency: 0.02 + Math.random() * 0.03
  };

  birds.push(birdObj);
  birdSpeed += 0.002; // slight increase on spawn
}

function moveBird(bird) {
  bird.posX += birdSpeed * bird.direction;
  bird.element.style.left = bird.posX + 'vw';
  const wobble = Math.sin(bird.posX * bird.frequency * Math.PI * 2) * bird.amplitude;
  bird.element.style.top = (bird.y + wobble) + 'px';

  if ((bird.direction === 1 && bird.posX > 100) || (bird.direction === -1 && bird.posX < -6)) {
    bird.element.remove();
    birds = birds.filter(b => b !== bird);
    missed++;
    missedDisplay.textContent = 'Missed: ' + missed;
    if (missed >= maxMissed) gameOver();
  }
}

function createBlood(x, y) {
  const rect = gameArea.getBoundingClientRect();
  const blood = document.createElement('div');
  blood.classList.add('blood');
  blood.style.left = (x - rect.left - 30) + 'px';
  blood.style.top = (y - rect.top - 30) + 'px';
  gameArea.appendChild(blood);
  setTimeout(() => blood.remove(), 500);
}

function gameOver() {
  gameRunning = false;
  birds.forEach(b => b.element.remove());
  birds = [];
  backgroundMusic.pause();
  birdChirp.pause();
  gameOverDiv.innerHTML = `Game Over! Your Score: ${score}`;
  gameOverDiv.style.display = 'block';
  replayBtn.style.display = 'inline-block';
}
</script>
<div id="footer">Created by Ambikesh Srivastava</div>
</body>
</html>
